/*! For license information please see chatWidget.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={24:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([e.id,'/* Input area */\n.chat-widget-input-wrapper {\n  position: relative;\n}\n\n.chat-widget-input-container {\n  padding: 12px 16px;\n  border-top: 1px solid #eaeaea;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.chat-widget-input-actions {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 8px;\n}\n\n.chat-widget-input-action {\n  background: none;\n  border: none;\n  color: #617190;\n  cursor: pointer;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.chat-widget-input-field {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  position: relative;\n}\n\n.chat-widget-input-field input {\n  flex: 1;\n  padding: 10px 12px;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  font-size: 14px;\n  outline: none;\n}\n\n.chat-widget-send-button {\n  background-color: transparent;\n  border: none;\n  color: #1877f2;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n}\n\n.chat-widget-send-button[disabled] {\n  color: #cbd5e0;\n  cursor: default;\n}\n\n.chat-widget-branding {\n  display: flex;\n  justify-content: flex-end;\n  font-size: 12px;\n  color: #a0aec0;\n  padding-top: 4px;\n  font-family: "Noto Sans", sans-serif;\n}\n.chat-widget-brand-name {\n  font-weight: 600;\n}\n/* Fix for input visibility with on-screen keyboard */\n@media (max-height: 600px) {\n  .chat-widget-input-container {\n    flex-shrink: 0;\n  }\n}\n',""]);const a=s},52:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap);"]),s.push([e.id,"/* Base container styles */\n.chat-widget-container {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  width: 380px;\n  height: 600px;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  background-color: white;\n  border-radius: 16px;\n  box-shadow: 0 5px 40px rgba(0, 0, 0, 0.16);\n  overflow: hidden;\n  z-index: 1000;\n  transition: all 0.3s ease;\n}\n\n/* Mobile specific styles */\n.chat-widget-container.mobile {\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n  bottom: 0;\n  right: 0;\n  border-radius: 0;\n}\n/* Chat launcher button */\n.chat-widget-button {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background-color: #1877f2;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  border: none;\n  z-index: 999;\n  transition: transform 0.2s ease;\n}\n\n.chat-widget-button:hover {\n  transform: scale(1.05);\n}\n",""]);const a=s},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},s=[],a=0;a<e.length;a++){var c=e[a],l=r.base?c[0]+r.base:c[0],u=i[l]||0,h="".concat(l," ").concat(u);i[l]=u+1;var d=n(h),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var f=o(p,r);r.byIndex=a,t.splice(a,0,{identifier:h,updater:f,references:1})}s.push(h)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var c=r(e,o),l=0;l<i.length;l++){var u=n(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},159:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},353:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([e.id,"/* Image Attachment Styles */\n.image-attachment {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  width: 100%;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n  z-index: 10;\n}\n\n.image-attachment-header {\n  padding: 12px 16px;\n  border-bottom: 1px solid #eaeaea;\n  font-weight: 600;\n  font-size: 14px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.image-attachment-close {\n  background: none;\n  border: none;\n  color: #617190;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.image-attachment-upload {\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.image-upload-label {\n  width: 100%;\n  height: 150px;\n  border: 2px dashed #e2e8f0;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: border-color 0.2s;\n}\n\n.image-upload-label:hover {\n  border-color: #1877f2;\n}\n\n.image-upload-input {\n  display: none;\n}\n\n.image-upload-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  color: #617190;\n}\n\n.image-upload-hint {\n  font-size: 12px;\n  opacity: 0.7;\n}\n\n.image-attachment-preview {\n  padding: 16px;\n}\n\n.image-attachment-preview img {\n  width: 100%;\n  max-height: 200px;\n  object-fit: contain;\n  border-radius: 8px;\n}\n\n.image-attachment-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 12px;\n}\n\n.image-attachment-cancel {\n  padding: 8px 12px;\n  background-color: #f1f5f9;\n  border: none;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.image-attachment-send {\n  padding: 8px 12px;\n  background-color: #1877f2;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n}\n",""]);const a=s},422:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([e.id,"/* Emoji Picker Styles */\n.emoji-picker {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  width: 100%;\n  max-height: 300px;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n  z-index: 10;\n  overflow-y: auto;\n}\n\n.emoji-picker-header {\n  padding: 12px 16px;\n  border-bottom: 1px solid #eaeaea;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.emoji-picker-content {\n  padding: 8px;\n}\n\n.emoji-category {\n  margin-bottom: 12px;\n}\n\n.emoji-category-title {\n  font-size: 12px;\n  color: #617190;\n  margin-bottom: 4px;\n  padding: 0 8px;\n}\n\n.emoji-grid {\n  display: grid;\n  grid-template-columns: repeat(8, 1fr);\n  gap: 4px;\n}\n\n.emoji-item {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  font-size: 20px;\n  background: none;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n\n.emoji-item:hover {\n  background-color: #f0f2f5;\n}\n",""]);const a=s},540:(e,t,n)=>{e.exports=n(869)},601:e=>{e.exports=function(e){return e[1]}},643:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([e.id,'/* Header Styles */\n.chat-widget-header {\n  background-color: #1877f2;\n  color: white;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n}\n\n.chat-widget-header-tabs {\n  display: flex;\n  padding: 8px 16px 0;\n}\n\n.chat-widget-tab {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px;\n  cursor: pointer;\n  border-radius: 8px 8px 0 0;\n  opacity: 0.7;\n}\n\n.chat-widget-tab.active {\n  background-color: rgba(255, 255, 255, 0.1);\n  opacity: 1;\n}\n\n.chat-widget-header-content {\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n\n.chat-widget-agents {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 8px;\n}\n\n.chat-widget-agent-avatar {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: 2px solid white;\n  margin-left: -10px;\n  object-fit: cover;\n}\n\n.chat-widget-agent-avatar:first-child {\n  margin-left: 0;\n}\n\n.chat-widget-agent-avatar.message-icon {\n  background-color: #55c3ff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.chat-widget-header h2 {\n  font-family: "Noto Sans", sans-serif;\n  font-size: 12.4px;\n  margin: 0;\n  font-weight: 500;\n  line-height: 18px;\n  color: #fff;\n}\n\n.chat-widget-header p {\n  font-size: 14px;\n  margin: 0;\n  opacity: 0.8;\n}\n\n.chat-widget-close-button {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: rgba(0, 0, 0, 0.2);\n  border: none;\n  border-radius: 50%;\n  width: 26px;\n  height: 26px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  cursor: pointer;\n}\n\n/* Responsive adjustments for even smaller screens */\n@media (max-height: 500px) {\n  .chat-widget-header {\n    padding-top: 0;\n    padding-bottom: 8px;\n  }\n\n  .chat-widget-header-content {\n    padding: 8px 16px;\n  }\n\n  .chat-widget-agents {\n    margin-bottom: 4px;\n  }\n\n  .chat-widget-agent-avatar {\n    width: 28px;\n    height: 28px;\n  }\n\n  .chat-widget-header h2 {\n    font-size: 16px;\n  }\n\n  .chat-widget-header p {\n    font-size: 12px;\n  }\n}\n\n/* Fix for input visibility with on-screen keyboard */\n@media (max-height: 600px) {\n  .chat-widget-header {\n    flex-shrink: 0;\n  }\n}\n',""]);const a=s},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},854:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([e.id,"/* Audio Recorder Styles */\n.audio-recorder {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  width: 100%;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);\n  z-index: 10;\n}\n\n.audio-recorder-header {\n  padding: 12px 16px;\n  border-bottom: 1px solid #eaeaea;\n  font-weight: 600;\n  font-size: 14px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.audio-recorder-close {\n  background: none;\n  border: none;\n  color: #617190;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.audio-recorder-content {\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16px;\n}\n\n.audio-recorder-timer {\n  font-size: 24px;\n  font-weight: 600;\n  color: #1877f2;\n}\n\n.audio-recorder-visualizer {\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n  gap: 4px;\n  height: 60px;\n  width: 100%;\n}\n\n.audio-wave {\n  width: 4px;\n  background-color: #1877f2;\n  border-radius: 2px;\n  animation: wave 1.2s ease-in-out infinite;\n}\n\n.audio-wave:nth-child(1) {\n  animation-delay: 0s;\n  height: 20%;\n}\n\n.audio-wave:nth-child(2) {\n  animation-delay: 0.2s;\n  height: 40%;\n}\n\n.audio-wave:nth-child(3) {\n  animation-delay: 0.4s;\n  height: 60%;\n}\n\n.audio-wave:nth-child(4) {\n  animation-delay: 0.6s;\n  height: 40%;\n}\n\n.audio-wave:nth-child(5) {\n  animation-delay: 0.8s;\n  height: 20%;\n}\n\n@keyframes wave {\n  0%,\n  100% {\n    transform: scaleY(1);\n  }\n  50% {\n    transform: scaleY(2);\n  }\n}\n\n.audio-recorder-preview {\n  width: 100%;\n  border-radius: 8px;\n}\n\n.audio-recorder-actions {\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  margin-top: 12px;\n  width: 100%;\n}\n\n.audio-recorder-stop {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 8px 16px;\n  background-color: #ef4444;\n  color: white;\n  border: none;\n  border-radius: 20px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.audio-recorder-cancel {\n  padding: 8px 16px;\n  background-color: #f1f5f9;\n  border: none;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.audio-recorder-send {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 8px 16px;\n  background-color: #1877f2;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.audio-recorder-send:disabled {\n  background-color: #cbd5e0;\n  cursor: not-allowed;\n}\n",""]);const a=s},869:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=(Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.consumer"),Symbol.for("react.context"),Symbol.for("react.forward_ref")),o=(Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator,{isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}}),i=Object.assign,s={};function a(e,t,n){this.props=e,this.context=t,this.refs=s,this.updater=n||o}function c(){}function l(e,t,n){this.props=e,this.context=t,this.refs=s,this.updater=n||o}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},c.prototype=a.prototype;var u=l.prototype=new c;u.constructor=l,i(u,a.prototype),u.isPureReactComponent=!0;Array.isArray;var h={H:null,A:null,T:null,S:null},d=Object.prototype.hasOwnProperty;function p(e,t,r,o,i,s){return r=s.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:s}}"function"==typeof reportError&&reportError;t.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)d.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var a=Array(s),c=0;c<s;c++)a[c]=arguments[c+2];o.children=a}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return p(e,i,void 0,0,0,o)},t.forwardRef=function(e){return{$$typeof:r,render:e}},t.useEffect=function(e,t){return h.H.useEffect(e,t)},t.useRef=function(e){return h.H.useRef(e)},t.useState=function(e){return h.H.useState(e)}},924:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([e.id,'/* Messages container */\n.chat-widget-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  background-color: #f4f7f9;\n  font-family: "Noto Sans", sans-serif;\n}\n\n/* Message styles */\n.chat-widget-message {\n  display: flex;\n  align-items: flex-start;\n  max-width: 85%;\n  font-size: 12.6px;\n}\n\n.chat-widget-message.user-message {\n  margin-left: auto;\n  flex-direction: row-reverse;\n}\n\n.chat-widget-message-avatar {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  overflow: hidden;\n  margin-right: 8px;\n  flex-shrink: 0;\n}\n\n.chat-widget-message-avatar img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.chat-widget-message-content {\n  display: flex;\n  flex-direction: column;\n}\n\n.chat-widget-message-sender {\n  font-size: 12px;\n  color: #617190;\n  margin-bottom: 2px;\n}\n\n.chat-widget-message-bubble {\n  padding: 8px 14px;\n  border-radius: 18px;\n  font-size: 14px;\n  line-height: 1.4;\n  word-break: break-word;\n}\n\n.agent-message .chat-widget-message-bubble {\n  background-color: #e5e5ea;\n  color: #000;\n  border-top-left-radius: 4px;\n}\n\n.user-message .chat-widget-message-bubble {\n  background-color: #1877f2;\n  color: white;\n  border-bottom-right-radius: 4px;\n}\n\n/* Responsive adjustments for even smaller screens */\n@media (max-height: 500px) {\n  .chat-widget-messages {\n    padding: 12px;\n  }\n}\n\n/* Fix for input visibility with on-screen keyboard */\n@media (max-height: 600px) {\n  .chat-widget-messages {\n    flex: 1;\n    min-height: 0;\n  }\n}\n',""]);const a=s}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var r={};n.r(r),n.d(r,{default:()=>eo});var o={};n.r(o),n.d(o,{hasBrowserEnv:()=>dt,hasStandardBrowserEnv:()=>ft,hasStandardBrowserWebWorkerEnv:()=>mt,navigator:()=>pt,origin:()=>gt});var i={};n.r(i),n.d(i,{Decoder:()=>Cr,Encoder:()=>Nr,PacketType:()=>Tr,protocol:()=>Or});var s=n(540);const a=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim();var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(0,s.forwardRef)((({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:l,...u},h)=>(0,s.createElement)("svg",{ref:h,...c,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:a("lucide",o),...u},[...l.map((([e,t])=>(0,s.createElement)(e,t))),...Array.isArray(i)?i:[i]]))),u=(e,t)=>{const n=(0,s.forwardRef)((({className:n,...r},o)=>{return(0,s.createElement)(l,{ref:o,iconNode:t,className:a(`lucide-${i=e,i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var i}));return n.displayName=`${e}`,n},h=u("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var d=n(72),p=n.n(d),f=n(825),m=n.n(f),g=n(659),y=n.n(g),b=n(56),v=n.n(b),w=n(159),x=n.n(w),E=n(113),R=n.n(E),_=n(52),S={};S.styleTagTransform=R(),S.setAttributes=v(),S.insert=y().bind(null,"head"),S.domAPI=m(),S.insertStyleElement=x(),p()(_.A,S),_.A&&_.A.locals&&_.A.locals;const k=u("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),A=u("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]),O=u("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),T=u("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var N=n(24),j={};j.styleTagTransform=R(),j.setAttributes=v(),j.insert=y().bind(null,"head"),j.domAPI=m(),j.insertStyleElement=x(),p()(N.A,j),N.A&&N.A.locals&&N.A.locals;const C=u("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var L=n(353),P={};function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function U(e){var t,n,r=e.onCancel,o=e.onSend,i=(t=(0,s.useState)(null),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];return React.createElement("div",{className:"image-attachment"},React.createElement("div",{className:"image-attachment-header"},React.createElement("span",null,"Image Attachment"),React.createElement("button",{className:"image-attachment-close",onClick:r,"aria-label":"Cancel attachment"},React.createElement(C,{size:16}))),a?React.createElement("div",{className:"image-attachment-preview"},React.createElement("img",{src:a||"/placeholder.svg",alt:"Preview"}),React.createElement("div",{className:"image-attachment-actions"},React.createElement("button",{className:"image-attachment-cancel",onClick:r},"Cancel"),React.createElement("button",{className:"image-attachment-send",onClick:function(){a&&o(a)}},"Send Image"))):React.createElement("div",{className:"image-attachment-upload"},React.createElement("label",{className:"image-upload-label"},React.createElement("input",{type:"file",accept:"image/*",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n)if(n.type.startsWith("image/")){var r=new FileReader;r.onload=function(e){var t;null!==(t=e.target)&&void 0!==t&&t.result&&c(e.target.result)},r.readAsDataURL(n)}else alert("Please select an image file")},className:"image-upload-input"}),React.createElement("div",{className:"image-upload-placeholder"},React.createElement("span",null,"Click to select an image"),React.createElement("span",{className:"image-upload-hint"},"JPG, PNG, GIF up to 5MB")))))}P.styleTagTransform=R(),P.setAttributes=v(),P.insert=y().bind(null,"head"),P.domAPI=m(),P.insertStyleElement=x(),p()(L.A,P),L.A&&L.A.locals&&L.A.locals;const F=u("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var I=n(854),q={};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function M(){M=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,s=Object.create(i.prototype),a=new N(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function y(){}function b(){}function v(){}var w={};l(w,s,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(j([])));E&&E!==n&&r.call(E,s)&&(w=E);var R=v.prototype=y.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=h(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==D(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(u).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=d;return function(i,s){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=A(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(D(t)+" is not iterable")}return b.prototype=v,o(R,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:b,configurable:!0}),b.displayName=l(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(R),l(R,c,"Generator"),l(R,s,(function(){return this})),l(R,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function z(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){z(i,r,o,s,a,"next",e)}function a(e){z(i,r,o,s,a,"throw",e)}s(void 0)}))}}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function K(e){var t=e.onCancel,n=e.onSend,r=V((0,s.useState)(!1),2),o=r[0],i=r[1],a=V((0,s.useState)(0),2),c=a[0],l=a[1],u=V((0,s.useState)(null),2),h=u[0],d=u[1],p=(0,s.useRef)(null),f=(0,s.useRef)([]),m=(0,s.useRef)(null),g=(0,s.useRef)(null);(0,s.useEffect)((function(){var e=function(){var e=H(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){w()}}),[]);var y,b,v,w=function(){if(m.current&&(console.log("clearing interval"),clearInterval(m.current),m.current=null),p.current&&"recording"===p.current.state)try{p.current.stop()}catch(e){console.error("Error stopping media recorder:",e)}g.current&&(g.current.getTracks().forEach((function(e){e.stop()})),g.current=null),l(0),i(!1)},x=function(){var e=H(M().mark((function e(){var n,r,o;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("started recording"),e.prev=1,w(),l(0),e.next=6,navigator.mediaDevices.getUserMedia({audio:!0});case 6:n=e.sent,g.current=n,r=new MediaRecorder(n,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3}),p.current=r,f.current=[],r.ondataavailable=function(e){e.data&&e.data.size>0&&f.current.push(e.data)},r.onstop=function(){if(i(!1),l(0),f.current.length>0){var e=new Blob(f.current,{type:"audio/webm"});d(e)}},r.start(),i(!0),o=Date.now(),m.current||(m.current=setInterval((function(){console.log("Started recording timer"),l(Math.floor((Date.now()-o)/1e3))}),1e3)),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.error("Error accessing microphone:",e.t0),t();case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}(),E=function(){w(),t()};return React.createElement("div",{className:"audio-recorder"},React.createElement("div",{className:"audio-recorder-header"},React.createElement("span",null,o?"Recording...":"Recording Complete"),React.createElement("button",{className:"audio-recorder-close",onClick:E,"aria-label":"Cancel recording"},React.createElement(C,{size:16}))),React.createElement("div",{className:"audio-recorder-content"},React.createElement("div",{className:"audio-recorder-timer"},(y=c,b=Math.floor(y/60),v=y%60,"".concat(b.toString().padStart(2,"0"),":").concat(v.toString().padStart(2,"0")))),o?React.createElement("div",{className:"audio-recorder-visualizer"},React.createElement("div",{className:"audio-wave"}),React.createElement("div",{className:"audio-wave"}),React.createElement("div",{className:"audio-wave"}),React.createElement("div",{className:"audio-wave"}),React.createElement("div",{className:"audio-wave"})):h&&React.createElement("audio",{src:URL.createObjectURL(h),controls:!0,className:"audio-recorder-preview"})),React.createElement("div",{className:"audio-recorder-actions"},o?React.createElement("button",{className:"audio-recorder-stop",onClick:function(){if(o){if(m.current&&(clearInterval(m.current),m.current=null,l(0)),i(!1),p.current&&"recording"===p.current.state)try{p.current.requestData(),p.current.stop()}catch(e){console.error("Error stopping recording:",e)}g.current&&(g.current.getTracks().forEach((function(e){return e.stop()})),g.current=null)}},"aria-label":"Stop recording"},React.createElement(F,{size:16}),React.createElement("span",null,"Stop")):React.createElement(React.Fragment,null,React.createElement("button",{className:"audio-recorder-cancel",onClick:E},"Cancel"),React.createElement("button",{className:"audio-recorder-send",onClick:function(){h&&(n(h),w())},disabled:!h},React.createElement(T,{size:16}),React.createElement("span",null,"Send")))))}q.styleTagTransform=R(),q.setAttributes=v(),q.insert=y().bind(null,"head"),q.domAPI=m(),q.insertStyleElement=x(),p()(I.A,q),I.A&&I.A.locals&&I.A.locals;var $=n(422),J={};J.styleTagTransform=R(),J.setAttributes=v(),J.insert=y().bind(null,"head"),J.domAPI=m(),J.insertStyleElement=x(),p()($.A,J),$.A&&$.A.locals&&$.A.locals;var G=[{name:"Smileys",emojis:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘"]},{name:"Gestures",emojis:["👍","👎","👌","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","👇","☝️","✋","🤚","🖐️","🖖"]},{name:"Objects",emojis:["❤️","🧡","💛","💚","💙","💜","🖤","💔","💯","💢","💥","💫","💦","💨","🕳️","💣","💬"]}];function Y(e){var t=e.onEmojiSelect,n=e.onClose,r=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e=function(e){r.current&&!r.current.contains(e.target)&&n()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[n]),React.createElement("div",{className:"emoji-picker",ref:r},React.createElement("div",{className:"emoji-picker-header"},React.createElement("span",null,"Emojis")),React.createElement("div",{className:"emoji-picker-content"},G.map((function(e){return React.createElement("div",{key:e.name,className:"emoji-category"},React.createElement("div",{className:"emoji-category-title"},e.name),React.createElement("div",{className:"emoji-grid"},e.emojis.map((function(e,r){return React.createElement("button",{key:r,className:"emoji-item",onClick:function(){return function(e){t(e),n()}(e)},"aria-label":"Emoji ".concat(e)},e)}))))}))))}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Z(e){var t=e.onSendMessage,n=e.inputRef,r=e.onSendAudio,o=X((0,s.useState)(""),2),i=o[0],a=o[1],c=X((0,s.useState)(!1),2),l=c[0],u=c[1],h=X((0,s.useState)(!1),2),d=h[0],p=h[1],f=X((0,s.useState)(!1),2),m=f[0],g=f[1],y=l||d||m;return React.createElement("div",{className:"chat-widget-input-wrapper"},l&&React.createElement(Y,{onEmojiSelect:function(e){var t;a((function(t){return t+e})),null===(t=n.current)||void 0===t||t.focus()},onClose:function(){return u(!1)}}),d&&React.createElement(U,{onCancel:function(){return p(!1)},onSend:function(e){onSendImage?onSendImage(e):t("[Image Attachment]"),p(!1)}}),m&&React.createElement(K,{onCancel:function(){return g(!1)},onSend:function(e){r?r(e):t("[Audio Message]"),g(!1)}}),!y&&React.createElement("form",{className:"chat-widget-input-container",onSubmit:function(e){e.preventDefault(),i.trim()&&(t(i),a(""))}},React.createElement("div",{className:"chat-widget-input-actions"},React.createElement("button",{type:"button",className:"chat-widget-input-action","aria-label":"Add emoji",onClick:function(){return u(!0)}},React.createElement(k,{size:20})),React.createElement("button",{type:"button",className:"chat-widget-input-action","aria-label":"Attach file",onClick:function(){return p(!0)}},React.createElement(A,{size:20})),React.createElement("button",{type:"button",className:"chat-widget-input-action","aria-label":"Voice message",onClick:function(){return g(!0)}},React.createElement(O,{size:20}))),React.createElement("div",{className:"chat-widget-input-field"},React.createElement("input",{ref:n,type:"text",placeholder:"Compose your message...",value:i,onChange:function(e){return a(e.target.value)}}),React.createElement("button",{type:"submit",className:"chat-widget-send-button",disabled:!i.trim(),"aria-label":"Send message"},React.createElement(T,{size:18}))),React.createElement("div",{className:"chat-widget-branding"},React.createElement("span",null,"Powered by"," ",React.createElement("a",{href:"https://supportly.site",target:"_blank",className:"chat-widget-brand-name"},"Supportly")))))}var ee=n(924),te={};te.styleTagTransform=R(),te.setAttributes=v(),te.insert=y().bind(null,"head"),te.domAPI=m(),te.insertStyleElement=x(),p()(ee.A,te),ee.A&&ee.A.locals&&ee.A.locals;var ne={baseUrl:"http://localhost:3000/api",assetsUrl:"http://localhost:3000",socket:"http://127.0.0.1:3000/"};function re(e){var t=e.messages,n=e.avatar,r=e.senderName,o=e.colorScheme,i=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e;null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[]),React.createElement("div",{className:"chat-widget-messages"},t.map((function(e){return React.createElement("div",{key:e.id,className:"chat-widget-message ".concat("customer"===e.sender?"user-message":"agent-message")},"business"===e.sender&&n&&React.createElement("div",{className:"chat-widget-message-avatar"},React.createElement("img",{src:"".concat(ne.assetsUrl).concat(n),alt:r})),React.createElement("div",{className:"chat-widget-message-content"},"business"===e.sender&&React.createElement("div",{className:"chat-widget-message-sender"},r),React.createElement("div",{className:"chat-widget-message-bubble",style:{backgroundColor:"business"===e.sender?"#e5e5ea":null!=o?o:"#1877f2"}},e.content)))})),React.createElement("div",{ref:i}))}var oe=n(643),ie={};function se(e){var t,n=e.onClose,r=e.colorScheme,o=e.currentAgent,i=e.businessInfo;return React.createElement("div",{className:"chat-widget-header",style:{backgroundColor:null!=r?r:"#1877f2"}},React.createElement("div",{className:"chat-widget-header-tabs"}),React.createElement("div",{className:"chat-widget-header-content"},o?React.createElement("img",{src:"".concat(ne.assetsUrl).concat(null!==(t=o.avatar)&&void 0!==t?t:i.avatarUrl),alt:"Agent 3",className:"chat-widget-agent-avatar"}):React.createElement("div",{className:"chat-widget-agents"},React.createElement("img",{src:"/placeholder.svg?height=32&width=32",alt:"Agent 1",className:"chat-widget-agent-avatar"}),React.createElement("img",{src:"/placeholder.svg?height=32&width=32",alt:"Agent 2",className:"chat-widget-agent-avatar"}),React.createElement("img",{src:"/placeholder.svg?height=32&width=32",alt:"Agent 3",className:"chat-widget-agent-avatar"}),React.createElement("div",{className:"chat-widget-agent-avatar message-icon"},React.createElement(h,{size:16}))),React.createElement("h2",null,o?"".concat(o.name," from ").concat(i.businessName):"Questions? Chat with us!")),React.createElement("button",{className:"chat-widget-close-button",onClick:n,"aria-label":"Close chat"},React.createElement(C,{size:16})))}function ae(e,t){return function(){return e.apply(t,arguments)}}ie.styleTagTransform=R(),ie.setAttributes=v(),ie.insert=y().bind(null,"head"),ie.domAPI=m(),ie.insertStyleElement=x(),p()(oe.A,ie),oe.A&&oe.A.locals&&oe.A.locals;const{toString:ce}=Object.prototype,{getPrototypeOf:le}=Object,ue=(e=>t=>{const n=ce.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),he=e=>(e=e.toLowerCase(),t=>ue(t)===e),de=e=>t=>typeof t===e,{isArray:pe}=Array,fe=de("undefined"),me=he("ArrayBuffer"),ge=de("string"),ye=de("function"),be=de("number"),ve=e=>null!==e&&"object"==typeof e,we=e=>{if("object"!==ue(e))return!1;const t=le(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},xe=he("Date"),Ee=he("File"),Re=he("Blob"),_e=he("FileList"),Se=he("URLSearchParams"),[ke,Ae,Oe,Te]=["ReadableStream","Request","Response","Headers"].map(he);function Ne(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,o;if("object"!=typeof e&&(e=[e]),pe(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(r=0;r<i;r++)s=o[r],t.call(null,e[s],s,e)}}function je(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const Ce="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Le=e=>!fe(e)&&e!==Ce,Pe=(Be="undefined"!=typeof Uint8Array&&le(Uint8Array),e=>Be&&e instanceof Be);var Be;const Ue=he("HTMLFormElement"),Fe=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ie=he("RegExp"),qe=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Ne(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)},De=he("AsyncFunction"),Me=(ze="function"==typeof setImmediate,He=ye(Ce.postMessage),ze?setImmediate:He?(Ve=`axios@${Math.random()}`,We=[],Ce.addEventListener("message",(({source:e,data:t})=>{e===Ce&&t===Ve&&We.length&&We.shift()()}),!1),e=>{We.push(e),Ce.postMessage(Ve,"*")}):e=>setTimeout(e));var ze,He,Ve,We;const Ke="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Ce):"undefined"!=typeof process&&process.nextTick||Me,$e={isArray:pe,isArrayBuffer:me,isBuffer:function(e){return null!==e&&!fe(e)&&null!==e.constructor&&!fe(e.constructor)&&ye(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ye(e.append)&&("formdata"===(t=ue(e))||"object"===t&&ye(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&me(e.buffer),t},isString:ge,isNumber:be,isBoolean:e=>!0===e||!1===e,isObject:ve,isPlainObject:we,isReadableStream:ke,isRequest:Ae,isResponse:Oe,isHeaders:Te,isUndefined:fe,isDate:xe,isFile:Ee,isBlob:Re,isRegExp:Ie,isFunction:ye,isStream:e=>ve(e)&&ye(e.pipe),isURLSearchParams:Se,isTypedArray:Pe,isFileList:_e,forEach:Ne,merge:function e(){const{caseless:t}=Le(this)&&this||{},n={},r=(r,o)=>{const i=t&&je(n,o)||o;we(n[i])&&we(r)?n[i]=e(n[i],r):we(r)?n[i]=e({},r):pe(r)?n[i]=r.slice():n[i]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&Ne(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(Ne(t,((t,r)=>{n&&ye(t)?e[r]=ae(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,s;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&le(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ue,kindOfTest:he,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(pe(e))return e;let t=e.length;if(!be(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Ue,hasOwnProperty:Fe,hasOwnProp:Fe,reduceDescriptors:qe,freezeMethods:e=>{qe(e,((t,n)=>{if(ye(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];ye(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return pe(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:je,global:Ce,isContextDefined:Le,isSpecCompliantForm:function(e){return!!(e&&ye(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(ve(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=pe(e)?[]:{};return Ne(e,((e,t)=>{const i=n(e,r+1);!fe(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:De,isThenable:e=>e&&(ve(e)||ye(e))&&ye(e.then)&&ye(e.catch),setImmediate:Me,asap:Ke};function Je(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}$e.inherits(Je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$e.toJSONObject(this.config),code:this.code,status:this.status}}});const Ge=Je.prototype,Ye={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Ye[e]={value:e}})),Object.defineProperties(Je,Ye),Object.defineProperty(Ge,"isAxiosError",{value:!0}),Je.from=(e,t,n,r,o,i)=>{const s=Object.create(Ge);return $e.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Je.call(s,e.message,t,n,r,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const Xe=Je;function Qe(e){return $e.isPlainObject(e)||$e.isArray(e)}function Ze(e){return $e.endsWith(e,"[]")?e.slice(0,-2):e}function et(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ze(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const tt=$e.toFlatObject($e,{},null,(function(e){return/^is[A-Z]/.test(e)})),nt=function(e,t,n){if(!$e.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=$e.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!$e.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&$e.isSpecCompliantForm(t);if(!$e.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if($e.isDate(e))return e.toISOString();if(!a&&$e.isBlob(e))throw new Xe("Blob is not supported. Use a Buffer instead.");return $e.isArrayBuffer(e)||$e.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let a=e;if(e&&!o&&"object"==typeof e)if($e.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if($e.isArray(e)&&function(e){return $e.isArray(e)&&!e.some(Qe)}(e)||($e.isFileList(e)||$e.endsWith(n,"[]"))&&(a=$e.toArray(e)))return n=Ze(n),a.forEach((function(e,r){!$e.isUndefined(e)&&null!==e&&t.append(!0===s?et([n],r,i):null===s?n:n+"[]",c(e))})),!1;return!!Qe(e)||(t.append(et(o,n,i),c(e)),!1)}const u=[],h=Object.assign(tt,{defaultVisitor:l,convertValue:c,isVisitable:Qe});if(!$e.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!$e.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),$e.forEach(n,(function(n,i){!0===(!($e.isUndefined(n)||null===n)&&o.call(t,n,$e.isString(i)?i.trim():i,r,h))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t};function rt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ot(e,t){this._pairs=[],e&&nt(e,this,t)}const it=ot.prototype;it.append=function(e,t){this._pairs.push([e,t])},it.toString=function(e){const t=e?function(t){return e.call(this,t,rt)}:rt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const st=ot;function at(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ct(e,t,n){if(!t)return e;const r=n&&n.encode||at;$e.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let i;if(i=o?o(t,n):$e.isURLSearchParams(t)?t.toString():new st(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const lt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$e.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ut={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ht={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:st,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},dt="undefined"!=typeof window&&"undefined"!=typeof document,pt="object"==typeof navigator&&navigator||void 0,ft=dt&&(!pt||["ReactNative","NativeScript","NS"].indexOf(pt.product)<0),mt="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,gt=dt&&window.location.href||"http://localhost",yt={...o,...ht},bt=function(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=e.length;return i=!i&&$e.isArray(r)?r.length:i,a?($e.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s):(r[i]&&$e.isObject(r[i])||(r[i]=[]),t(e,n,r[i],o)&&$e.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s)}if($e.isFormData(e)&&$e.isFunction(e.entries)){const n={};return $e.forEachEntry(e,((e,r)=>{t(function(e){return $e.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null},vt={transitional:ut,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=$e.isObject(e);if(o&&$e.isHTMLForm(e)&&(e=new FormData(e)),$e.isFormData(e))return r?JSON.stringify(bt(e)):e;if($e.isArrayBuffer(e)||$e.isBuffer(e)||$e.isStream(e)||$e.isFile(e)||$e.isBlob(e)||$e.isReadableStream(e))return e;if($e.isArrayBufferView(e))return e.buffer;if($e.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return nt(e,new yt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return yt.isNode&&$e.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=$e.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return nt(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e){if($e.isString(e))try{return(0,JSON.parse)(e),$e.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||vt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if($e.isResponse(e)||$e.isReadableStream(e))return e;if(e&&$e.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw Xe.from(e,Xe.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yt.classes.FormData,Blob:yt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$e.forEach(["delete","get","head","post","put","patch"],(e=>{vt.headers[e]={}}));const wt=vt,xt=$e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Et=Symbol("internals");function Rt(e){return e&&String(e).trim().toLowerCase()}function _t(e){return!1===e||null==e?e:$e.isArray(e)?e.map(_t):String(e)}function St(e,t,n,r,o){return $e.isFunction(r)?r.call(this,t,n):(o&&(t=n),$e.isString(t)?$e.isString(r)?-1!==t.indexOf(r):$e.isRegExp(r)?r.test(t):void 0:void 0)}class kt{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=Rt(t);if(!o)throw new Error("header name must be a non-empty string");const i=$e.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=_t(e))}const i=(e,t)=>$e.forEach(e,((e,n)=>o(e,n,t)));if($e.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if($e.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&xt[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if($e.isHeaders(e))for(const[t,r]of e.entries())o(r,t,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=Rt(e)){const n=$e.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if($e.isFunction(t))return t.call(this,e,n);if($e.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Rt(e)){const n=$e.findKey(this,e);return!(!n||void 0===this[n]||t&&!St(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=Rt(e)){const o=$e.findKey(n,e);!o||t&&!St(0,n[o],o,t)||(delete n[o],r=!0)}}return $e.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!St(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return $e.forEach(this,((r,o)=>{const i=$e.findKey(n,o);if(i)return t[i]=_t(r),void delete t[o];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();s!==o&&delete t[o],t[s]=_t(r),n[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return $e.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&$e.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Et]=this[Et]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Rt(e);t[r]||(function(e,t){const n=$e.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return $e.isArray(e)?e.forEach(r):r(e),this}}kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),$e.reduceDescriptors(kt.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),$e.freezeMethods(kt);const At=kt;function Ot(e,t){const n=this||wt,r=t||n,o=At.from(r.headers);let i=r.data;return $e.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function Tt(e){return!(!e||!e.__CANCEL__)}function Nt(e,t,n){Xe.call(this,null==e?"canceled":e,Xe.ERR_CANCELED,t,n),this.name="CanceledError"}$e.inherits(Nt,Xe,{__CANCEL__:!0});const jt=Nt;function Ct(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Xe("Request failed with status code "+n.status,[Xe.ERR_BAD_REQUEST,Xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Lt=(e,t,n=3)=>{let r=0;const o=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];o||(o=c),n[i]=a,r[i]=c;let u=s,h=0;for(;u!==i;)h+=n[u++],u%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<t)return;const d=l&&c-l;return d?Math.round(1e3*h/d):void 0}}(50,250);return function(e,t){let n,r,o=0,i=1e3/t;const s=(t,i=Date.now())=>{o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),a=t-o;a>=i?s(e,t):(n=e,r||(r=setTimeout((()=>{r=null,s(n)}),i-a)))},()=>n&&s(n)]}((n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,a=i-r,c=o(a);r=i,e({loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},Pt=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Bt=e=>(...t)=>$e.asap((()=>e(...t))),Ut=yt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,yt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(yt.origin),yt.navigator&&/(msie|trident)/i.test(yt.navigator.userAgent)):()=>!0,Ft=yt.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const s=[e+"="+encodeURIComponent(t)];$e.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),$e.isString(r)&&s.push("path="+r),$e.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function It(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&r||0==n?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const qt=e=>e instanceof At?{...e}:e;function Dt(e,t){t=t||{};const n={};function r(e,t,n,r){return $e.isPlainObject(e)&&$e.isPlainObject(t)?$e.merge.call({caseless:r},e,t):$e.isPlainObject(t)?$e.merge({},t):$e.isArray(t)?t.slice():t}function o(e,t,n,o){return $e.isUndefined(t)?$e.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!$e.isUndefined(t))return r(void 0,t)}function s(e,t){return $e.isUndefined(t)?$e.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>o(qt(e),qt(t),0,!0)};return $e.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=c[r]||o,s=i(e[r],t[r],r);$e.isUndefined(s)&&i!==a||(n[r]=s)})),n}const Mt=e=>{const t=Dt({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=At.from(a),t.url=ct(It(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),$e.isFormData(r))if(yt.hasStandardBrowserEnv||yt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(yt.hasStandardBrowserEnv&&(o&&$e.isFunction(o)&&(o=o(t)),o||!1!==o&&Ut(t.url))){const e=i&&s&&Ft.read(s);e&&a.set(i,e)}return t},zt="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Mt(e);let o=r.data;const i=At.from(r.headers).normalize();let s,a,c,l,u,{responseType:h,onUploadProgress:d,onDownloadProgress:p}=r;function f(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=At.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ct((function(e){t(e),f()}),(function(e){n(e),f()}),{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Xe("Request aborted",Xe.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Xe("Network Error",Xe.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||ut;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Xe(t,o.clarifyTimeoutError?Xe.ETIMEDOUT:Xe.ECONNABORTED,e,m)),m=null},void 0===o&&i.setContentType(null),"setRequestHeader"in m&&$e.forEach(i.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),$e.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),h&&"json"!==h&&(m.responseType=r.responseType),p&&([c,u]=Lt(p,!0),m.addEventListener("progress",c)),d&&m.upload&&([a,l]=Lt(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new jt(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===yt.protocols.indexOf(y)?n(new Xe("Unsupported protocol "+y+":",Xe.ERR_BAD_REQUEST,e)):m.send(o||null)}))},Ht=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Xe?t:new jt(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new Xe(`timeout ${t} of ms exceeded`,Xe.ETIMEDOUT))}),t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:a}=r;return a.unsubscribe=()=>$e.asap(s),a}},Vt=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},Wt=(e,t,n,r)=>{const o=async function*(e,t){for await(const n of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}}(e))yield*Vt(n,t)}(e,t);let i,s=0,a=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return a(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw a(e),e}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},Kt="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,$t=Kt&&"function"==typeof ReadableStream,Jt=Kt&&("function"==typeof TextEncoder?(Gt=new TextEncoder,e=>Gt.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Gt;const Yt=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Xt=$t&&Yt((()=>{let e=!1;const t=new Request(yt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Qt=$t&&Yt((()=>$e.isReadableStream(new Response("").body))),Zt={stream:Qt&&(e=>e.body)};var en;Kt&&(en=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Zt[e]&&(Zt[e]=$e.isFunction(en[e])?t=>t[e]():(t,n)=>{throw new Xe(`Response type '${e}' is not supported`,Xe.ERR_NOT_SUPPORT,n)})})));const tn=Kt&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:h="same-origin",fetchOptions:d}=Mt(e);l=l?(l+"").toLowerCase():"text";let p,f=Ht([o,i&&i.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&Xt&&"get"!==n&&"head"!==n&&0!==(g=await(async(e,t)=>{const n=$e.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if($e.isBlob(e))return e.size;if($e.isSpecCompliantForm(e)){const t=new Request(yt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return $e.isArrayBufferView(e)||$e.isArrayBuffer(e)?e.byteLength:($e.isURLSearchParams(e)&&(e+=""),$e.isString(e)?(await Jt(e)).byteLength:void 0)})(t):n})(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if($e.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Pt(g,Lt(Bt(c)));r=Wt(n.body,65536,e,t)}}$e.isString(h)||(h=h?"include":"omit");const o="credentials"in Request.prototype;p=new Request(t,{...d,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?h:void 0});let i=await fetch(p);const s=Qt&&("stream"===l||"response"===l);if(Qt&&(a||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=$e.toFiniteNumber(i.headers.get("content-length")),[n,r]=a&&Pt(t,Lt(Bt(a),!0))||[];i=new Response(Wt(i.body,65536,n,(()=>{r&&r(),m&&m()})),e)}l=l||"text";let y=await Zt[$e.findKey(Zt,l)||"text"](i,e);return!s&&m&&m(),await new Promise(((t,n)=>{Ct(t,n,{data:y,headers:At.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(t){if(m&&m(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new Xe("Network Error",Xe.ERR_NETWORK,e,p),{cause:t.cause||t});throw Xe.from(t,t&&t.code,e,p)}}),nn={http:null,xhr:zt,fetch:tn};$e.forEach(nn,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const rn=e=>`- ${e}`,on=e=>$e.isFunction(e)||null===e||!1===e,sn=e=>{e=$e.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!on(n)&&(r=nn[(t=String(n)).toLowerCase()],void 0===r))throw new Xe(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(rn).join("\n"):" "+rn(e[0]):"as no adapter specified";throw new Xe("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function an(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new jt(null,e)}function cn(e){return an(e),e.headers=At.from(e.headers),e.data=Ot.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),sn(e.adapter||wt.adapter)(e).then((function(t){return an(e),t.data=Ot.call(e,e.transformResponse,t),t.headers=At.from(t.headers),t}),(function(t){return Tt(t)||(an(e),t&&t.response&&(t.response.data=Ot.call(e,e.transformResponse,t.response),t.response.headers=At.from(t.response.headers))),Promise.reject(t)}))}const ln={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{ln[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const un={};ln.transitional=function(e,t,n){function r(e,t){return"[Axios v1.8.1] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new Xe(r(o," has been removed"+(t?" in "+t:"")),Xe.ERR_DEPRECATED);return t&&!un[o]&&(un[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}},ln.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const hn={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Xe("options must be an object",Xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new Xe("option "+i+" must be "+n,Xe.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Xe("Unknown option "+i,Xe.ERR_BAD_OPTION)}},validators:ln},dn=hn.validators;class pn{constructor(e){this.defaults=e,this.interceptors={request:new lt,response:new lt}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Dt(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&hn.assertOptions(n,{silentJSONParsing:dn.transitional(dn.boolean),forcedJSONParsing:dn.transitional(dn.boolean),clarifyTimeoutError:dn.transitional(dn.boolean)},!1),null!=r&&($e.isFunction(r)?t.paramsSerializer={serialize:r}:hn.assertOptions(r,{encode:dn.function,serialize:dn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),hn.assertOptions(t,{baseUrl:dn.spelling("baseURL"),withXsrfToken:dn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&$e.merge(o.common,o[t.method]);o&&$e.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=At.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[cn.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);h<u;)l=l.then(e[h++],e[h++]);return l}u=s.length;let d=t;for(h=0;h<u;){const e=s[h++],t=s[h++];try{d=e(d)}catch(e){t.call(this,e);break}}try{l=cn.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,u=c.length;h<u;)l=l.then(c[h++],c[h++]);return l}getUri(e){return ct(It((e=Dt(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}$e.forEach(["delete","get","head","options"],(function(e){pn.prototype[e]=function(t,n){return this.request(Dt(n||{},{method:e,url:t,data:(n||{}).data}))}})),$e.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(Dt(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}pn.prototype[e]=t(),pn.prototype[e+"Form"]=t(!0)}));const fn=pn;class mn{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new jt(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new mn((function(t){e=t})),cancel:e}}}const gn=mn,yn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yn).forEach((([e,t])=>{yn[t]=e}));const bn=yn,vn=function e(t){const n=new fn(t),r=ae(fn.prototype.request,n);return $e.extend(r,fn.prototype,n,{allOwnKeys:!0}),$e.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Dt(t,n))},r}(wt);vn.Axios=fn,vn.CanceledError=jt,vn.CancelToken=gn,vn.isCancel=Tt,vn.VERSION="1.8.1",vn.toFormData=nt,vn.AxiosError=Xe,vn.Cancel=vn.CanceledError,vn.all=function(e){return Promise.all(e)},vn.spread=function(e){return function(t){return e.apply(null,t)}},vn.isAxiosError=function(e){return $e.isObject(e)&&!0===e.isAxiosError},vn.mergeConfig=Dt,vn.AxiosHeaders=At,vn.formToJSON=e=>bt($e.isHTMLForm(e)?new FormData(e):e),vn.getAdapter=sn,vn.HttpStatusCode=bn,vn.default=vn;const wn=vn,xn=Object.create(null);xn.open="0",xn.close="1",xn.ping="2",xn.pong="3",xn.message="4",xn.upgrade="5",xn.noop="6";const En=Object.create(null);Object.keys(xn).forEach((e=>{En[xn[e]]=e}));const Rn={type:"error",data:"parser error"},_n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Sn="function"==typeof ArrayBuffer,kn=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,An=({type:e,data:t},n,r)=>_n&&t instanceof Blob?n?r(t):On(t,r):Sn&&(t instanceof ArrayBuffer||kn(t))?n?r(t):On(new Blob([t]),r):r(xn[e]+(t||"")),On=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Tn(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Nn;const jn="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)jn["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;const Cn="function"==typeof ArrayBuffer,Ln=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Bn(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:Pn(e.substring(1),t)}:En[n]?e.length>1?{type:En[n],data:e.substring(1)}:{type:En[n]}:Rn},Pn=(e,t)=>{if(Cn){const n=(e=>{let t,n,r,o,i,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const l=new ArrayBuffer(s),u=new Uint8Array(l);for(t=0;t<a;t+=4)n=jn[e.charCodeAt(t)],r=jn[e.charCodeAt(t+1)],o=jn[e.charCodeAt(t+2)],i=jn[e.charCodeAt(t+3)],u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&i;return l})(e);return Bn(n,t)}return{base64:!0,data:e}},Bn=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Un=String.fromCharCode(30);let Fn;function In(e){return e.reduce(((e,t)=>e+t.length),0)}function qn(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let o=0;o<t;o++)n[o]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Dn(e){if(e)return function(e){for(var t in Dn.prototype)e[t]=Dn.prototype[t];return e}(e)}Dn.prototype.on=Dn.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Dn.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Dn.prototype.off=Dn.prototype.removeListener=Dn.prototype.removeAllListeners=Dn.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Dn.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},Dn.prototype.emitReserved=Dn.prototype.emit,Dn.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Dn.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Mn="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),zn="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Hn(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Vn=zn.setTimeout,Wn=zn.clearTimeout;function Kn(e,t){t.useNativeTimers?(e.setTimeoutFn=Vn.bind(zn),e.clearTimeoutFn=Wn.bind(zn)):(e.setTimeoutFn=zn.setTimeout.bind(zn),e.clearTimeoutFn=zn.clearTimeout.bind(zn))}function $n(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Jn extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Gn extends Dn{constructor(e){super(),this.writable=!1,Kn(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Jn(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Ln(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class Yn extends Gn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Un),r=[];for(let e=0;e<n.length;e++){const o=Ln(n[e],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let o=0;e.forEach(((e,i)=>{An(e,!1,(e=>{r[i]=e,++o===n&&t(r.join(Un))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=$n()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Xn=!1;try{Xn="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const Qn=Xn;function Zn(){}class er extends Yn{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class tr extends Dn{constructor(e,t,n){super(),this.createRequest=e,Kn(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Hn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=tr.requestsCount++,tr.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Zn,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete tr.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function nr(){for(let e in tr.requests)tr.requests.hasOwnProperty(e)&&tr.requests[e].abort()}tr.requestsCount=0,tr.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",nr):"function"==typeof addEventListener&&addEventListener("onpagehide"in zn?"pagehide":"unload",nr,!1));const rr=function(){const e=or({xdomain:!1});return e&&null!==e.responseType}();function or(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Qn))return new XMLHttpRequest}catch(e){}if(!t)try{return new(zn[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}const ir="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class sr extends Gn{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=ir?{}:Hn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;An(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}r&&Mn((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=$n()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const ar=zn.WebSocket||zn.MozWebSocket,cr={websocket:class extends sr{createSocket(e,t,n){return ir?new ar(e,t,n):t?new ar(e,t):new ar(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Gn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){Fn||(Fn=new TextDecoder);const n=[];let r=0,o=-1,i=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(0===r){if(In(n)<1)break;const e=qn(n,1);i=!(128&~e[0]),o=127&e[0],r=o<126?3:126===o?1:2}else if(1===r){if(In(n)<2)break;const e=qn(n,2);o=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(In(n)<8)break;const e=qn(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),i=t.getUint32(0);if(i>Math.pow(2,21)-1){a.enqueue(Rn);break}o=i*Math.pow(2,32)+t.getUint32(4),r=3}else{if(In(n)<o)break;const e=qn(n,o);a.enqueue(Ln(i?e:Fn.decode(e),t)),r=0}if(0===o||o>e){a.enqueue(Rn);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=new TransformStream({transform(e,t){!function(e,t){_n&&e.data instanceof Blob?e.data.arrayBuffer().then(Tn).then(t):Sn&&(e.data instanceof ArrayBuffer||kn(e.data))?t(Tn(e.data)):An(e,!1,(e=>{Nn||(Nn=new TextEncoder),t(Nn.encode(e))}))}(e,(n=>{const r=n.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const e=new DataView(o.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{o=new Uint8Array(9);const e=new DataView(o.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!=typeof e.data&&(o[0]|=128),t.enqueue(o),t.enqueue(n)}))}});r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const o=()=>{n.read().then((({done:e,value:t})=>{e||(this.onPacket(t),o())})).catch((e=>{}))};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&Mn((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends er{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=rr&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new tr(or,this.uri(),e)}}},lr=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ur=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hr(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let o=lr.exec(e||""),i={},s=14;for(;s--;)i[ur[s]]=o[s]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){const n=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1),"/"==t.slice(-1)&&n.splice(n.length-1,1),n}(0,i.path),i.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,i.query),i}const dr="function"==typeof addEventListener&&"function"==typeof removeEventListener,pr=[];dr&&addEventListener("offline",(()=>{pr.forEach((e=>e()))}),!1);class fr extends Dn{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=hr(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=hr(t.host).host);Kn(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),dr&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},pr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&fr.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",fr.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Mn((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:e,data:t,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(fr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),dr&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=pr.indexOf(this._offlineEventListener);-1!==e&&pr.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}fr.protocol=4;class mr extends fr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;fr.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;fr.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function o(){n||(n=!0,l(),t.close(),t=null)}const i=e=>{const n=new Error("probe error: "+e);n.transport=t.name,o(),this.emitReserved("upgradeError",n)};function s(){i("transport closed")}function a(){i("socket closed")}function c(e){t&&e.name!==t.name&&o()}const l=()=>{t.removeListener("open",r),t.removeListener("error",i),t.removeListener("close",s),this.off("close",a),this.off("upgrading",c)};t.once("open",r),t.once("error",i),t.once("close",s),this.once("close",a),this.once("upgrading",c),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class gr extends mr{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>cr[e])).filter((e=>!!e))),super(e,n)}}const yr="function"==typeof ArrayBuffer,br=Object.prototype.toString,vr="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===br.call(Blob),wr="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===br.call(File);function xr(e){return yr&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||vr&&e instanceof Blob||wr&&e instanceof File}function Er(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Er(e[t]))return!0;return!1}if(xr(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Er(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Er(e[t]))return!0;return!1}function Rr(e){const t=[],n=e.data,r=e;return r.data=_r(n,t),r.attachments=t.length,{packet:r,buffers:t}}function _r(e,t){if(!e)return e;if(xr(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=_r(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=_r(e[r],t));return n}return e}function Sr(e,t){return e.data=kr(e.data,t),delete e.attachments,e}function kr(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=kr(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=kr(e[n],t));return e}const Ar=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Or=5;var Tr;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Tr||(Tr={}));class Nr{constructor(e){this.replacer=e}encode(e){return e.type!==Tr.EVENT&&e.type!==Tr.ACK||!Er(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Tr.EVENT?Tr.BINARY_EVENT:Tr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Tr.BINARY_EVENT&&e.type!==Tr.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Rr(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function jr(e){return"[object Object]"===Object.prototype.toString.call(e)}class Cr extends Dn{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Tr.BINARY_EVENT;n||t.type===Tr.BINARY_ACK?(t.type=n?Tr.EVENT:Tr.ACK,this.reconstructor=new Lr(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!xr(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Tr[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Tr.BINARY_EVENT||n.type===Tr.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Cr.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case Tr.CONNECT:return jr(t);case Tr.DISCONNECT:return void 0===t;case Tr.CONNECT_ERROR:return"string"==typeof t||jr(t);case Tr.EVENT:case Tr.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Ar.indexOf(t[0]));case Tr.ACK:case Tr.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Lr{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Sr(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Pr(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Br=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ur extends Dn{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Pr(e,"open",this.onopen.bind(this)),Pr(e,"packet",this.onpacket.bind(this)),Pr(e,"error",this.onerror.bind(this)),Pr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,o;if(Br.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const i={type:Tr.EVENT,data:t,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),i.id=e}const s=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,a=this.connected&&!(null===(o=this.io.engine)||void 0===o?void 0:o._hasPingExpired());return this.flags.volatile&&!s||(a?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r),i=(...e)=>{this.io.clearTimeoutFn(o),t.apply(this,e)};i.withError=!0,this.acks[e]=i}emitWithAck(e,...t){return new Promise(((n,r)=>{const o=(e,t)=>e?r(e):n(t);o.withError=!0,t.push(o),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...r)=>{if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Tr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Tr.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tr.EVENT:case Tr.BINARY_EVENT:this.onevent(e);break;case Tr.ACK:case Tr.BINARY_ACK:this.onack(e);break;case Tr.DISCONNECT:this.ondisconnect();break;case Tr.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:Tr.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Tr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Fr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Fr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},Fr.prototype.reset=function(){this.attempts=0},Fr.prototype.setMin=function(e){this.ms=e},Fr.prototype.setMax=function(e){this.max=e},Fr.prototype.setJitter=function(e){this.jitter=e};class Ir extends Dn{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Kn(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Fr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||i;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new gr(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Pr(t,"open",(function(){n.onopen(),e&&e()})),o=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},i=Pr(t,"error",o);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),o(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Pr(e,"ping",this.onping.bind(this)),Pr(e,"data",this.ondata.bind(this)),Pr(e,"error",this.onerror.bind(this)),Pr(e,"close",this.onclose.bind(this)),Pr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){Mn((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ur(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const qr={};function Dr(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=hr(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,o=n.id,i=n.path,s=qr[o]&&i in qr[o].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?a=new Ir(r,t):(qr[o]||(qr[o]=new Ir(r,t)),a=qr[o]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Dr,{Manager:Ir,Socket:Ur,io:Dr,connect:Dr});var Mr=Dr(ne.socket,{transports:["websocket"],upgrade:!1,reconnectionAttempts:5,timeout:5e3});function zr(e){return zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zr(e)}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){Wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wr(e,t,n){return(t=function(e){var t=function(e){if("object"!=zr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kr(e){return function(e){if(Array.isArray(e))return Qr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(){$r=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,s=Object.create(i.prototype),a=new N(r||[]);return o(s,"_invoke",{value:k(e,n,a)}),s}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",g={};function y(){}function b(){}function v(){}var w={};l(w,s,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(j([])));E&&E!==n&&r.call(E,s)&&(w=E);var R=v.prototype=y.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(o,i,s,a){var c=h(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==zr(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(u).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=d;return function(i,s){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=A(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function A(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(zr(t)+" is not iterable")}return b.prototype=v,o(R,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:b,configurable:!0}),b.displayName=l(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(R),l(R,c,"Generator"),l(R,s,(function(){return this})),l(R,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Jr(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Gr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){Jr(i,r,o,s,a,"next",e)}function a(e){Jr(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(e,t)||Xr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(e,t){if(e){if("string"==typeof e)return Qr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qr(e,t):void 0}}function Qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Zr="20c1aaec2416da02e32fd4e557ad2b52c2e9a8c845e6faacafab318503d2c4d4";function eo(){var e,t=Yr((0,s.useState)(!1),2),n=t[0],r=t[1],o=Yr((0,s.useState)(!1),2),i=o[0],a=o[1],c=Yr((0,s.useState)(""),2),l=c[0],u=c[1],d=Yr((0,s.useState)(""),2),p=d[0],f=(d[1],Yr((0,s.useState)(null),2)),m=f[0],g=f[1],y=Yr((0,s.useState)([{id:Date.now().toString(),sender:"business",content:"Hello! How may I assist you today?",contentType:"text"}]),2),b=y[0],v=y[1],w=Yr((0,s.useState)(null),2),x=w[0],E=w[1],R=(0,s.useRef)(null),_=(0,s.useRef)(null);(0,s.useEffect)((function(){var e=function(){a(window.innerWidth<768)};e(),N();var t=k();return u(t),A(t),Mr.connect(),Mr.emit("join-room",t),Mr.on("receiveMessage",O),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,s.useEffect)((function(){var e=function(){n&&_.current&&R.current&&setTimeout((function(){var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),100)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[n]);var S=function(){r(!n)},k=function(){var e=localStorage.getItem("deviceId");return e||(e="device_".concat(Math.random().toString(36).substring(2,15)),localStorage.setItem("deviceId",e)),e},A=function(){var e=Gr($r().mark((function e(t){var n;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching user messages..."),e.prev=1,e.next=4,wn.get("".concat(ne.baseUrl,"/messages-service/fetch-customer-messages"),{params:{apiKey:Zr,sessionId:t}});case 4:n=e.sent,console.log(n.data.data),n.data.data.currentAgent&&g(n.data.data.currentAgent),v(n.data.data.messages),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),v([]),console.error("Error fetching user messages:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),O=function(e){console.log("Received message:",e),v((function(t){return[].concat(Kr(t),[e])}))},T=function(){var e=Gr($r().mark((function e(t){var n,r,o;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim()){e.next=2;break}return e.abrupt("return");case 2:return n={id:Date.now().toString(),sender:"customer",content:t,contentType:"text",status:"sending"},v((function(e){return[].concat(Kr(e),[n])})),e.prev=4,console.log("Sending messages"),(r=new FormData).append("businessId",1),p&&r.append("customerEmail",p),r.append("sessionId",l),r.append("sender","customer"),r.append("content",t),r.append("contentType","text"),e.next=15,wn.post("".concat(ne.baseUrl,"/messages-service/send-message"),r,{headers:{"Content-Type":"multipart/form-data"}});case 15:o=e.sent,v((function(e){return e.map((function(e){return e.id===n.id?Vr(Vr({},e),{},{status:"sent"}):e}))})),console.log(o.data),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),v((function(e){return e.map((function(e){return e.id===n.id?Vr(Vr({},e),{},{status:"error"}):e}))})),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Gr($r().mark((function e(){var t,n;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={apiKey:Zr},e.next=4,wn.get("".concat(ne.baseUrl,"/widget-service/get"),{params:t});case 4:n=e.sent,E(n.data.data),console.log(n.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching widget settings:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return x?React.createElement(React.Fragment,null,!n&&React.createElement("button",{className:"chat-widget-button",onClick:S,"aria-label":"Open chat widget"},React.createElement(h,null)),n&&React.createElement("div",{ref:R,className:"chat-widget-container ".concat(i?"mobile":"")},React.createElement(se,{onClose:S,colorScheme:x.colorScheme,currentAgent:m,businessInfo:x}),React.createElement(re,{messages:b,avatar:null!==(e=m.avatar)&&void 0!==e?e:x.avatarUrl,senderName:x.businessName,colorScheme:x.colorScheme}),React.createElement(Z,{onSendMessage:T,inputRef:_,onSendAudio:function(){}}))):null}window.ChatWidget={mount:function(){var e=document.getElementById("chat-widget-container");e||((e=document.createElement("div")).id="chat-widget-container",document.body.appendChild(e)),createRoot(e).render(React.createElement(eo,null))}},window.ChatWidget=r})();